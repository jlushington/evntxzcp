Step: build-step-credential-initializer:

{"level":"warn","ts":1554949877.329083,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554949877.329637,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-git-source-0:

{"level":"warn","ts":1554949879.7178562,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554949880.0179193,"logger":"fallback-logger","caller":"git-init/main.go:92","msg":"Successfully cloned \"https://github.com/jlushington/evntxzcp.git\" @ \"abfd72dea548a311f521668e9c5433541efb85dd\" in path \"/workspace\""}
Step: build-step-jenkins:

Picked up _JAVA_OPTIONS: -Xmx400m
  31.898 [id=23]	WARNING	c.c.j.p.k.KubernetesCredentialProvider#convertSecret: Failed to convert Secret 'kaniko-secret' of type secretText due to secretText credential is missing the text
Started
Running in Durability level: PERFORMANCE_OPTIMIZED
  41.739 [id=27]	WARNING	i.f.k.c.i.VersionUsageUtils#alert: The client is using resource type 'customresourcedefinitions' with unstable version 'v1beta1'
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
[Pipeline] }
[Pipeline] // stage
[Pipeline] withCredentials
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (CI Build and push snapshot)
Stage "CI Build and push snapshot" skipped due to when conditional
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Release)
[Pipeline] git
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/jlushington/evntxzcp.git # timeout=10
Fetching upstream changes from https://github.com/jlushington/evntxzcp.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/jlushington/evntxzcp.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision abfd72dea548a311f521668e9c5433541efb85dd (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f abfd72dea548a311f521668e9c5433541efb85dd
 > git branch -a -v --no-abbrev # timeout=10
 > git branch -D master # timeout=10
 > git checkout -b master abfd72dea548a311f521668e9c5433541efb85dd
Commit message: "Base Pages Commit"
First time build. Skipping changelog.
[Pipeline] sh
+ jx-release-version
+ echo 0.0.7
[Pipeline] sh
+ cat VERSION
+ jx step tag --version 0.0.7
Tag v0.0.7 created and pushed to remote origin
[Pipeline] sh
+ npm install
npm WARN notice [SECURITY] webpack-dev-server has the following vulnerability: 1 high. Go here for more details: https://nodesecurity.io/advisories?search=webpack-dev-server&version=2.9.4 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.

> uglifyjs-webpack-plugin@0.4.6 postinstall /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job/node_modules/uglifyjs-webpack-plugin
> node lib/post_install.js

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 1417 packages in 104.965s
[Pipeline] sh
+ CI=true DISPLAY=:99 npm test

> evntxz-cp@0.1.0 test /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job
> react-scripts test --env=jsdom

 PASS  src/components/App.test.js
  âœ“ renders without crashing (54ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        13.673s
Ran all test suites.
  console.error node_modules/react-dom/cjs/react-dom.development.js:506
    Warning: Invalid DOM property `class`. Did you mean `className`?
        in i (at App.js:27)
        in a (at App.js:26)
        in div (at App.js:25)
        in Router (created by BrowserRouter)
        in BrowserRouter (at App.js:24)
        in App (at App.test.js:7)

[Pipeline] sh
+ cat VERSION
+ export VERSION=0.0.7
+ skaffold build -f skaffold.yaml
time="2019-04-11T02:36:00Z" level=warning msg="config version (skaffold/v1beta2) out of date: upgrading to latest (skaffold/v1beta6)"
Generating Tag for [changeme]...
Starting build...
Building [changeme]...
Sending build context to Docker daemon  525.1kBSending build context to Docker daemon   1.05MBSending build context to Docker daemon  1.585MBSending build context to Docker daemon   2.64MBSending build context to Docker daemon  3.164MBSending build context to Docker daemon  3.689MBSending build context to Docker daemon  4.762MBSending build context to Docker daemon  5.811MBSending build context to Docker daemon  6.354MBSending build context to Docker daemon  6.883MBSending build context to Docker daemon  7.419MBSending build context to Docker daemon  7.955MBSending build context to Docker daemon   8.51MBSending build context to Docker daemon  9.561MBSending build context to Docker daemon  11.72MBSending build context to Docker daemon  15.61MBSending build context to Docker daemon  27.83MBSending build context to Docker daemon  41.12MBSending build context to Docker daemon  51.06MBSending build context to Docker daemon  52.63MBSending build context to Docker daemon   53.7MBSending build context to Docker daemon  54.75MBSending build context to Docker daemon  56.86MBSending build context to Docker daemon  57.39MBSending build context to Docker daemon  57.92MBSending build context to Docker daemon  59.52MBSending build context to Docker daemon  60.05MBSending build context to Docker daemon  60.57MBSending build context to Docker daemon  61.12MBSending build context to Docker daemon  61.65MBSending build context to Docker daemon  62.17MBSending build context to Docker daemon   62.7MBSending build context to Docker daemon  63.77MBSending build context to Docker daemon  65.36MBSending build context to Docker daemon  66.45MBSending build context to Docker daemon  67.51MBSending build context to Docker daemon  68.03MBSending build context to Docker daemon  69.62MBSending build context to Docker daemon  70.69MBSending build context to Docker daemon  73.41MBSending build context to Docker daemon  74.99MBSending build context to Docker daemon  80.42MBSending build context to Docker daemon     82MBSending build context to Docker daemon  82.52MBSending build context to Docker daemon  83.57MBSending build context to Docker daemon   84.1MBSending build context to Docker daemon  85.68MBSending build context to Docker daemon  86.21MBSending build context to Docker daemon  88.34MBSending build context to Docker daemon  89.39MBSending build context to Docker daemon  89.91MBSending build context to Docker daemon  91.51MBSending build context to Docker daemon  92.05MBSending build context to Docker daemon  93.65MBSending build context to Docker daemon   95.3MBSending build context to Docker daemon  97.46MBSending build context to Docker daemon  98.54MBSending build context to Docker daemon  99.06MBSending build context to Docker daemon  99.59MBSending build context to Docker daemon  100.1MBSending build context to Docker daemon  100.7MBSending build context to Docker daemon  101.7MBSending build context to Docker daemon  102.3MBSending build context to Docker daemon  103.3MBSending build context to Docker daemon  103.9MBSending build context to Docker daemon  104.9MBSending build context to Docker daemon  105.5MBSending build context to Docker daemon    106MBSending build context to Docker daemon  107.6MBSending build context to Docker daemon  108.1MBSending build context to Docker daemon  108.6MBSending build context to Docker daemon  109.2MBSending build context to Docker daemon  109.7MBSending build context to Docker daemon  110.8MBSending build context to Docker daemon  112.4MBSending build context to Docker daemon  112.9MBSending build context to Docker daemon  113.5MBSending build context to Docker daemon  114.5MBSending build context to Docker daemon    115MBSending build context to Docker daemon  115.6MBSending build context to Docker daemon  116.1MBSending build context to Docker daemon  117.7MBSending build context to Docker daemon  118.3MBSending build context to Docker daemon  120.9MBSending build context to Docker daemon  121.5MBSending build co
ntext to Docker daemon    122MBSending build context to Docker daemon  122.5MBSending build context to Docker daemon  123.1MBSending build context to Docker daemon  123.6MBSending build context to Docker daemon  124.2MBSending build context to Docker daemon  125.2MBSending build context to Docker daemon  126.3MBSending build context to Docker daemon  127.4MBSending build context to Docker daemon  127.9MBSending build context to Docker daemon  128.4MBSending build context to Docker daemon    129MBSending build context to Docker daemon  129.5MBSending build context to Docker daemon  130.6MBSending build context to Docker daemon  131.6MBSending build context to Docker daemon  132.2MBSending build context to Docker daemon  133.2MBSending build context to Docker daemon  133.8MBSending build context to Docker daemon  134.8MBSending build context to Docker daemon  135.9MBSending build context to Docker daemon  139.1MBSending build context to Docker daemon  139.6MBSending build context to Docker daemon  142.3MBSending build context to Docker daemon  143.3MBSending build context to Docker daemon  144.4MBSending build context to Docker daemon  146.5MBSending build context to Docker daemon  147.1MBSending build context to Docker daemon  147.6MBSending build context to Docker daemon  149.8MBSending build context to Docker daemon  154.1MBSending build context to Docker daemon  158.4MBSending build context to Docker daemon  161.6MBSending build context to Docker daemon  163.2MBSending build context to Docker daemon  163.8MBSending build context to Docker daemon  164.9MBSending build context to Docker daemon  166.5MBSending build context to Docker daemon    167MBSending build context to Docker daemon  167.6MBSending build context to Docker daemon  168.1MBSending build context to Docker daemon  169.1MBSending build context to Docker daemon  170.8MBSending build context to Docker daemon  172.4MBSending build context to Docker daemon  172.9MBSending build context to Docker daemon    174MBSending build context to Docker daemon  174.5MBSending build context to Docker daemon  175.1MBSending build context to Docker daemon  175.6MBSending build context to Docker daemon  176.7MBSending build context to Docker daemon  177.2MBSending build context to Docker daemon  178.3MBSending build context to Docker daemon  178.8MBSending build context to Docker daemon  179.9MBSending build context to Docker daemon  180.5MBSending build context to Docker daemon    181MBSending build context to Docker daemon  181.5MBSending build context to Docker daemon  182.1MBSending build context to Docker daemon  182.6MBSending build context to Docker daemon  183.1MBSending build context to Docker daemon  184.2MBSending build context to Docker daemon  184.8MBSending build context to Docker daemon  185.9MBSending build context to Docker daemon  186.4MBSending build context to Docker daemon  192.5MBSending build context to Docker daemon  195.3MBSending build context to Docker daemon  195.8MBSending build context to Docker daemon  197.4MBSending build context to Docker daemon  199.5MBSending build context to Docker daemon  200.1MBSending build context to Docker daemon  201.7MBSending build context to Docker daemon  202.2MBSending build context to Docker daemon  202.8MBSending build context to Docker daemon  204.9MBSending build context to Docker daemon  205.5MBSending build context to Docker daemon    206MBSending build context to Docker daemon  207.6MBSending build context to Docker daemon  208.1MBSending build context to Docker daemon  209.2MBSending build context to Docker daemon  209.7MBSending build context to Docker daemon  210.2MBSending build context to Docker daemon  210.8MBSending build context to Docker daemon  211.3MBSending build context to Docker daemon  212.4MBSending build context to Docker daemon  213.5MBSending build context to Docker daemon  214.1MBSending build context to Docker daemon  214.6MBSending build context to Docker daemon  215.7MBSending build context to Docker 
daemon  216.3MBSending build context to Docker daemon  216.8MBSending build context to Docker daemon  217.3MBSending build context to Docker daemon  217.9MBSending build context to Docker daemon  218.4MBSending build context to Docker daemon  218.9MBSending build context to Docker daemon  219.5MBSending build context to Docker daemon    220MBSending build context to Docker daemon  220.5MBSending build context to Docker daemon  221.1MBSending build context to Docker daemon  221.6MBSending build context to Docker daemon  222.2MBSending build context to Docker daemon  222.7MBSending build context to Docker daemon  223.2MBSending build context to Docker daemon  223.8MBSending build context to Docker daemon  224.3MBSending build context to Docker daemon  224.8MBSending build context to Docker daemon  225.9MBSending build context to Docker daemon  226.4MBSending build context to Docker daemon    227MBSending build context to Docker daemon  227.5MBSending build context to Docker daemon    228MBSending build context to Docker daemon  228.5MBSending build context to Docker daemon  229.1MBSending build context to Docker daemon  229.6MBSending build context to Docker daemon  230.1MBSending build context to Docker daemon  230.7MBSending build context to Docker daemon  231.2MBSending build context to Docker daemon  231.7MBSending build context to Docker daemon  232.3MBSending build context to Docker daemon  232.8MBSending build context to Docker daemon  233.4MBSending build context to Docker daemon  233.9MBSending build context to Docker daemon  234.4MBSending build context to Docker daemon    235MBSending build context to Docker daemon  235.5MBSending build context to Docker daemon  236.1MBSending build context to Docker daemon  236.6MBSending build context to Docker daemon  237.1MBSending build context to Docker daemon  237.6MBSending build context to Docker daemon  238.2MBSending build context to Docker daemon  238.7MBSending build context to Docker daemon  239.2MBSending build context to Docker daemon  239.8MBSending build context to Docker daemon  240.3MBSending build context to Docker daemon  240.9MBSending build context to Docker daemon  241.3MB
Step 1/6 : FROM node:9-slim
 ---> e20bb4abe4ee
Step 2/6 : ENV PORT 8080
 ---> Using cache
 ---> 887095b9ce52
Step 3/6 : EXPOSE 8080
 ---> Using cache
 ---> 755dec4b73fd
Step 4/6 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 01de624c76cc
Step 5/6 : COPY . .
 ---> 1314aef33021
Step 6/6 : CMD npm start
 ---> Running in bd5940e6c5b1
 ---> 065fb6461355
Successfully built 065fb6461355
The push refers to a repository [10.39.253.125:5000/jlushington/evntxzcp]
a8e72c50016c: Preparing
27053d0e0598: Preparing
e16c226cf2a8: Preparing
7fd597d009e4: Preparing
7c6ab5fb7059: Preparing
ed271eac23e9: Preparing
156ff16f37e4: Preparing
ed271eac23e9: Waiting
156ff16f37e4: Waiting
27053d0e0598: Mounted from jlushington/evntxzweb
e16c226cf2a8: Mounted from jlushington/evntxzweb
7c6ab5fb7059: Mounted from jlushington/evntxzweb
7fd597d009e4: Mounted from jlushington/evntxzweb
ed271eac23e9: Mounted from jlushington/evntxzweb
156ff16f37e4: Mounted from jlushington/evntxzweb
a8e72c50016c: Pushed
0.0.7: digest: sha256:1a3155fae077cb2ca995662ff2bd7014c2124f5a7808695ebf91075ef0deb44a size: 1789
Build complete in 2m40.128802358s
Starting test...
Test complete in 7.568Âµs
changeme -> 10.39.253.125:5000/jlushington/evntxzcp:0.0.7@sha256:1a3155fae077cb2ca995662ff2bd7014c2124f5a7808695ebf91075ef0deb44a
There is a new version (0.26.0) of Skaffold available. Download it at https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64

[Pipeline] sh
+ cat VERSION
+ jx step post build --image 10.39.253.125:5000/jlushington/evntxzcp:0.0.7
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Promote to Environments)
[Pipeline] dir
Running in /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job/charts/evntxzcp
[Pipeline] {
[Pipeline] sh
+ cat ../../VERSION
+ jx step changelog --batch-mode --version v0.0.7
Converted /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job/charts/evntxzcp to an unshallow repository
Generating change log from git ref abfd72dea548a311f521668e9c5433541efb85dd => 3226d581ff9321095615af411315b15142880f71
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Finding issues in commit messages using git format
No release found for jlushington/evntxzcp and tag v0.0.7 so creating a new release
Updated the release information at https://github.com/jlushington/evntxzcp/releases/tag/v0.0.7
generated: /tmp/jenkinsTests.tmp/jenkins7883853336886228136test/workspace/job/charts/evntxzcp/templates/release.yaml
Created Release evntxzcp-0-0-7 resource in namespace jx
Updating PipelineActivity jlushington-evntxzcp-master-7 with version 0.0.7
Updated PipelineActivities jlushington-evntxzcp-master-7 with release notes URL: https://github.com/jlushington/evntxzcp/releases/tag/v0.0.7
[Pipeline] sh
+ jx step helm release
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: releases http://jenkins-x-chartmuseum:8080
Successfully added Helm repository releases.
Adding missing Helm repo: jenkins-x http://chartmuseum.jenkins-x.io
Successfully added Helm repository jenkins-x.
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Uploading chart file evntxzcp-0.0.7.tgz to http://jenkins-x-chartmuseum:8080/api/charts
Received 201 response: {"saved":true}
[Pipeline] sh
+ cat ../../VERSION
+ jx promote -b --all-auto --timeout 1h --version 0.0.7
prow based install so skip waiting for the merge of Pull Requests to go green as currently there is an issue with gettingstatuses from the PR, see https://github.com/jenkins-x/jx/issues/2410
Promoting app evntxzcp version 0.0.7 to namespace jx-staging
Created Pull Request: https://github.com/jlushington/environment-evntxz-staging/pull/26

Pull Request https://github.com/jlushington/environment-evntxz-staging/pull/26 is merged at sha 16a74e67630c097f0d64a6d50d98c988a8a8b933
Pull Request merged but we are not waiting for the update pipeline to complete!
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
